# POSTGRESQL

Les Ã©tapes Ã  faire pour commencer un projet


## CrÃ©ation d'un utilisateur et d'une base de donnÃ©es

### Se connecter au systÃ¨me avec l'utilisateur postgres

```
sudo -i -u postgres
```

=> on rÃ©cupÃ¨re une invite de commande du type `postgres@nomDeLaMachine~$`


### Se connecter au server PostGres dans le terminal

Une fois connectÃ© au systÃ¨me en tant que postgres, on tape : `psql`

Comme postgres est le Â« super-utilisateur Â» du serveur postGreSQL, on va pouvoir tout faire !

=> on a une invite de commande PostGres : postgres=#


### Se connecter au server PostGres dans le terminal en une seule commande

```
psql -U postgres
```

va exÃ©cuter le logiciel psql en mode super-utilisateur directement.


## Petit rÃ©sumÃ© des commandes postgreSQL "de base"
- `\l` pour lister les base de donnÃ©es

- `\du` pour lister les utilisateur (ou Â« roles Â») existants

- `\dt` pour lister les tables de la base de donnÃ©es courante

- `\c` nombdd pour se connecter Ã  une base de donnÃ©e en particulier


## CrÃ©er un utilisateur

` CREATE ROLE nomDeLutilisateur; `

ou, avec un peu plus de dÃ©tails : 

` CREATE ROLE nomDeLutilisateur WITH <une liste de droits>; `

### Quelques droits possibles 
- `LOGIN` : donne le droit Ã  lâ€™utilisateur de se connecter
- `PASSWORD` 'leMotDePasse' : donne un mot de passe Ã  lâ€™utilisateur.

```sql
CREATE ROLE nomDeLutilisateur WITH LOGIN PASSWORD 'leMotDePasse';

ou

CREATE USER nom_du_user WITH PASSWORD 'leMotDePasse'
```

### Modifier un utilisateur existant

```sql
ALTER ROLE nomDeLutilisateur WITH <une liste de droits>;
```


## CrÃ©er une base de donnÃ©es

`CREATE DATABASE nomDeLaBase OWNER nomDeLutilisateur;`

on crÃ©e une base de donnÃ©es, et on dÃ©clare lâ€™utilisateur comme Â« propriÃ©taire Â» (donc il a tous les droits) de cette base !

### Se connecter Ã  la base de donnÃ©es nouvellement crÃ©Ã©e, avec l'utilisateur nouvellement crÃ©Ã©

ğŸ“‹ Dans un nouveau terminal : `psql -U nomDeLutilisateur -d nomDeLaBase`

**Note** : par dÃ©faut, si on ne met pas `-d nomDeLaBase`, on se connecte automatiquement Ã  la base de donnÃ©es qui porte le mÃªme nom que lâ€™utilisateur.

### ExÃ©cuter les instructions SQL contenues dans un fichier

ğŸ“‹ `psql -U nomDeLutilisateur -d nomDeLaBase -f chemin/du/fichier.sql`

### Tester la connexion
```
psql -U nom_du_user -d nom_de_la_base
```